let secretNumber;
let attempts = 0;
let guessedNumbers = [];
let score = 0;
let timeLeft = 60;
let timer;

// DOM å…ƒç´ 
const userGuess = document.getElementById("userGuess");
const submitBtn = document.getElementById("submitBtn");
const restartBtn = document.getElementById("restartBtn");
const message = document.getElementById("message");
const attemptsDisplay = document.getElementById("attempts");
const guessedDisplay = document.getElementById("guessed");
const timerDisplay = document.getElementById("timer");
const scoreDisplay = document.getElementById("score");

function initGame() {
  // åˆå§‹åŒ–éŠæˆ²
  secretNumber = Math.floor(Math.random() * 100) + 1;
  attempts = 0;
  guessedNumbers = [];
  timeLeft = 60;
  userGuess.disabled = false;
  submitBtn.disabled = false;
  message.textContent = "";
  updateDisplay();

  clearInterval(timer); // æ¸…é™¤ä¹‹å‰çš„è¨ˆæ™‚å™¨
  timer = setInterval(() => {
    timeLeft--;
    timerDisplay.textContent = `å‰©é¤˜æ™‚é–“ï¼š${timeLeft} ç§’`;
    if (timeLeft <= 0) {
      endGame(`â° æ™‚é–“åˆ°ï¼ç­”æ¡ˆæ˜¯ ${secretNumber}`);
    }
  }, 1000);
}

function updateDisplay() {
  attemptsDisplay.textContent = `çŒœæ¸¬æ¬¡æ•¸ï¼š${attempts}`;
  guessedDisplay.textContent = `å·²çŒœçš„æ•¸å­—ï¼š${guessedNumbers.length ? guessedNumbers.join(", ") : "ç„¡"}`;
  scoreDisplay.textContent = `ç¸½åˆ†ï¼š${score}`;
}

function checkGuess() {
  const guess = parseInt(userGuess.value);

  if (isNaN(guess) || guess < 1 || guess > 100) {
    message.textContent = "è«‹è¼¸å…¥ 1 åˆ° 100 ä¹‹é–“çš„æ•¸å­—ï¼";
    return;
  }

  if (guessedNumbers.includes(guess)) {
    message.textContent = "ä½ å·²ç¶“çŒœéé€™å€‹æ•¸å­—äº†ï¼";
    return;
  }

  guessedNumbers.push(guess);
  attempts++;

  if (guess === secretNumber) {
    message.textContent = `ğŸ‰ æ­å–œä½ çŒœå°äº†ï¼ç­”æ¡ˆæ˜¯ ${secretNumber}`;
    score += 10;
    endGame("ğŸŠ éŠæˆ²çµæŸï¼");
  } else if (guess > secretNumber) {
    message.textContent = "æ•¸å­—å¤ªå¤§äº†ï¼";
  } else {
    message.textContent = "æ•¸å­—å¤ªå°äº†ï¼";
  }

  userGuess.value = "";
  updateDisplay();
}

function endGame(finalMessage) {
  message.textContent = finalMessage;
  userGuess.disabled = true;
  submitBtn.disabled = true;
  clearInterval(timer);
}

submitBtn.addEventListener("click", checkGuess);
restartBtn.addEventListener("click", initGame);

// åˆå§‹å•Ÿå‹•éŠæˆ²
initGame();


